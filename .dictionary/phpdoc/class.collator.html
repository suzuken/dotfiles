<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Collator クラス</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="intl.examples.basic.html">基本的な使用法</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="collator.asort.html">Collator::asort</a></div>
 <div class="up"><a href="book.intl.html">intl</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="class.collator" class="reference">
 <h1 class="title">Collator クラス</h1>
 

 <div class="partintro">

  
  <div class="section" id="collator.intro">
   <h2 class="title">導入</h2>
   <p class="para">
    各ロケール固有の並び順を考慮した文字列の比較機能を提供します。
   </p>
  </div>
  

  <div class="section" id="collator.synopsis">
   <h2 class="title">クラス概要</h2>

   
   <div class="classsynopsis">
    <div class="ooclass">
     
    </div>

    
    <div class="classsynopsisinfo">
     <span class="ooclass">
      <b class="classname">Collator</b>
     </span>
     {</div>
    

    

    <div class="classsynopsisinfo classsynopsisinfo_comment">/* メソッド */</div>
    <div class="constructorsynopsis dc-description">
    <span class="methodname"><a href="collator.construct.html" class="methodname">__construct</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$locale</tt></span>
   )</div>

    <div class="methodsynopsis dc-description">
   <span class="type">bool</span>
    <span class="methodname"><a href="collator.asort.html" class="methodname">asort</a></span>
    ( <span class="methodparam"><span class="type">array</span> <tt class="parameter reference">&$arr</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$sort_flag</tt></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">int</span>
    <span class="methodname"><a href="collator.compare.html" class="methodname">compare</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str1</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str2</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="modifier">static</span>
   <span class="type">Collator</span>
    <span class="methodname"><a href="collator.create.html" class="methodname">create</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$locale</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">int</span>
    <span class="methodname"><a href="collator.getattribute.html" class="methodname">getAttribute</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$attr</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">int</span>
    <span class="methodname"><a href="collator.geterrorcode.html" class="methodname">getErrorCode</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">string</span>
    <span class="methodname"><a href="collator.geterrormessage.html" class="methodname">getErrorMessage</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">string</span>
    <span class="methodname"><a href="collator.getlocale.html" class="methodname">getLocale</a></span>
    ([ <span class="methodparam"><span class="type">int</span> <tt class="parameter">$type</tt></span>
  ] )</div>
<div class="methodsynopsis dc-description">
   <span class="type">string</span>
    <span class="methodname"><a href="collator.getsortkey.html" class="methodname">getSortKey</a></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$str</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">int</span>
    <span class="methodname"><a href="collator.getstrength.html" class="methodname">getStrength</a></span>
    ( <span class="methodparam">void</span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span>
    <span class="methodname"><a href="collator.setattribute.html" class="methodname">setAttribute</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$attr</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$val</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span>
    <span class="methodname"><a href="collator.setstrength.html" class="methodname">setStrength</a></span>
    ( <span class="methodparam"><span class="type">int</span> <tt class="parameter">$strength</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span>
    <span class="methodname"><a href="collator.sortwithsortkeys.html" class="methodname">sortWithSortKeys</a></span>
    ( <span class="methodparam"><span class="type">array</span> <tt class="parameter reference">&$arr</tt></span>
   )</div>
<div class="methodsynopsis dc-description">
   <span class="type">bool</span>
    <span class="methodname"><a href="collator.sort.html" class="methodname">sort</a></span>
    ( <span class="methodparam"><span class="type">array</span> <tt class="parameter reference">&$arr</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$sort_flag</tt></span>
  ] )</div>

   }</div>
   

  </div>

  

  
<div class="section" id="intl.collator-constants">


 <h2 class="title">定義済み定数</h2>
 <p class="para">
  <dl>

   <dt>

    <span class="term">
     <b><tt>Collator::FRENCH_COLLATION</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <p class="para">
      文字列の後に続くさまざまなアクセントによる並べ替えを行います。
      この属性は、フランス語などの一部のロケールでは自動的に
      <em class="emphasis">On</em> となります。
      通常は、この属性を明示的に設定する必要はありません。
      これを <em class="emphasis">On</em>
      にすると文字列の比較の効率が落ちますが、
      ソートキーの長さは影響を受けません。
      使用できる値は次のとおりです。
      <ul class="simplelist">
       <li class="member"><b><tt>Collator::ON</tt></b></li>
       <li class="member"><b><tt>Collator::OFF</tt></b>(デフォルト)</li>
       <li class="member"><b><tt>Collator::DEFAULT_VALUE</tt></b></li>
      </ul>
     </p>
     <p class="para">
      <div class="example" id="example-2008">
       <p><b>例3 FRENCH_COLLATION のルール</b></p>
       <div class="example-contents"><p>
        <ul class="simplelist">
         <li class="member">F=OFF cote &lt; coté &lt; côte &lt; côté </li>
         <li class="member">F=ON cote &lt; côte &lt; coté &lt; côté</li>
        </ul>
       </p></div>
      </div>
     </p>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::ALTERNATE_HANDLING</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <p class="para">
      Alternate 属性は、UCA における、いわゆる &quot;可変文字 (variable characters)&quot;、
      つまり空白や句読点、記号の処理方法を制御するものです。
      Alternate を <em class="emphasis">NonIgnorable</em>
      (N) に設定すると、これらの文字の違いを通常の文字の違いと同じように扱います。
      Alternate を <em class="emphasis">Shifted</em>
      (S) に設定すると、これらの文字の違いの重要度を低くします。
      <em class="emphasis">Shifted</em> は、<em class="emphasis">Strength</em>
      を Quaternary (第四段階) に指定して使用することが多くなります。
      この場合、文字列の比較において空白や句読点そして記号の違いを考慮するのは
      それ以外の要素 (文字、アクセント、大文字小文字) がすべて一致する場合のみとなります。
      Alternate を Shifted 以外にした場合は、
      Strength が 3 のときと 4 のときの違いがなくなります。
      詳細な情報やサンプルは、
      <a href="http://www.unicode.org/reports/tr10/" class="link external">&raquo; UCA</a> の
      Variable_Weighting を参照ください。
      Alternate の値を単なる
      <em class="emphasis">On</em> や <em class="emphasis">Off</em>
      にしていない理由は、将来的にさらに別の値が追加される可能性があるからです。
      UCA のオプション Blanked を表すには、Strength を 3
      そして Alternate を Shifted に設定します。
      大半のロケールでは、デフォルトは NonIgnorable です。
      Shifted を選択すると、記号類以外が等しい文字列がたくさんあるときに処理速度が低下します。
      強度レベルを上げない限り、ソートキーの長さには影響を与えません。
     </p>
     <p class="para">
      使用できる値は次のとおりです。
      <ul class="simplelist">
       <li class="member"><b><tt>Collator::NON_IGNORABLE</tt></b>(デフォルト)</li>
       <li class="member"><b><tt>Collator::SHIFTED</tt></b></li>
       <li class="member"><b><tt>Collator::DEFAULT_VALUE</tt></b></li>
      </ul>
     </p>
     <p class="para">
      <div class="example" id="example-2009">
       <p><b>例4 ALTERNATE_HANDLING のルール</b></p>
       <div class="example-contents"><p>
        <ul class="simplelist">
         <li class="member">
         S=3, A=N di Silva &lt; Di Silva &lt; diSilva &lt; U.S.A. &lt; USA
         </li> 
         <li class="member">
         S=3, A=S di Silva = diSilva &lt; Di Silva &lt; U.S.A. = USA
         </li> 
         <li class="member">
         S=4, A=S di Silva &lt; diSilva &lt; Di Silva &lt; U.S.A. &lt; USA
         </li>
        </ul>
       </p></div>
      </div>
     </p>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::CASE_FIRST</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <p class="para">
      Case_First 属性は、
      文字列のその他の部分に違いがないときに
      大文字と小文字のどちらが前にくるかを指定するものです。
      使用できる値は、
      <em class="emphasis">Uppercase_First</em>
      (U) と <em class="emphasis">Lowercase_First</em>
      (L)、そして標準の <em class="emphasis">Default</em>
      と <em class="emphasis">Off</em> です。
      Off と Lowercase_First は、結果に関していえばほとんど違いはありません。
      そのため、普通は Lowercase_First を使うことはありません。
      Off あるいは Uppercase_First を使用することになります
      (X と L の違いを知りたい人は、<i>Collation
      Customization</i> を調べてください)。
      L あるいは U のいずれを指定しても、文字列比較の処理速度には影響を与えません。
      しかし、ソートキーの長さには影響を与えます。
     </p>
     <p class="para">
      使用できる値は次のとおりです。
      <ul class="simplelist">
       <li class="member"><b><tt>Collator::OFF</tt></b>(デフォルト)</li>
       <li class="member"><b><tt>Collator::LOWER_FIRST</tt></b></li>
       <li class="member"><b><tt>Collator::UPPER_FIRST</tt></b></li>
       <li class="member"><b><tt>Collator:DEFAULT</tt></b></li>
      </ul>
     </p>
     <p class="para">
      <div class="example" id="example-2010">
       <p><b>例5 CASE_FIRST のルール</b></p>
       <div class="example-contents"><p>
        <ul class="simplelist">
         <li class="member">C=X or C=L &quot;china&quot; &lt; &quot;China&quot; &lt; &quot;denmark&quot; &lt; &quot;Denmark&quot;</li> 
         <li class="member">C=U &quot;China&quot; &lt; &quot;china&quot; &lt; &quot;Denmark&quot; &lt; &quot;denmark&quot;</li>
        </ul>
       </p></div>
      </div>
     </p>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::CASE_LEVEL</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <p class="para">
      Case_Level 属性は、アクセントは無視するものの大文字小文字は区別したい場合に使用します。
      そんな場合は、Strength を <em class="emphasis">Primary</em>
      にして Case_Level を <em class="emphasis">On</em> とします。
      大半のロケールでは、この設定はデフォルトで Off となっています。
      この属性を <em class="emphasis">On</em>
      にすると、文字列の比較のパフォーマンスやソートキーに多少影響を及ぼします。
     </p>
     <p class="para">
      使用できる値は次のとおりです。
      <ul class="simplelist">
       <li class="member"><b><tt>Collator::OFF</tt></b>(デフォルト)</li>
       <li class="member"><b><tt>Collator::ON</tt></b></li>
       <li class="member"><b><tt>Collator::DEFAULT_VALUE</tt></b></li>
      </ul>
     </p>
     <p class="para">
      <div class="example" id="example-2011">
       <p><b>例6 CASE_LEVEL のルール</b></p>
       <div class="example-contents"><p>
        <ul class="simplelist">
         <li class="member">S=1, E=X role = Role = rôle</li> 
         <li class="member">S=1, E=O role = rôle &lt; Role</li>
        </ul>
       </p></div>
      </div>
     </p>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::NORMALIZATION_MODE</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <p class="para">
      Normalization 設定は、比較時にテキストを正規化するか否かを指定します。
      この設定を off (多くのロケールにおけるデフォルト設定です) にしても、
      一般的な使用法ではほぼ正確に利用できます (詳細は UTN #5 を参照ください)。
      問題となるのは、アクセント記号が正規の位置以外に登場する場合などです。
      この設定を <em class="emphasis">On</em> にすると、
      どんなテキストが与えられたとしても可能な限り結果を保証するようにします。
      この属性を <em class="emphasis">On</em> にすると、
      文字列比較のパフォーマンスに中程度の影響を及ぼします。
      影響の程度は、正規化を要する並びの登場頻度に依存します。
      ソートキーの長さには、目立った影響は及ぼしません。
      入力テキストが NFD あるいは NFKD 形式で正規化されている場合は、
      このオプションを有効にする必要はありません。
     </p>
     <p class="para">
      使用できる値は次のとおりです。
      <ul class="simplelist">
       <li class="member"><b><tt>Collator::OFF</tt></b>(デフォルト)</li>
       <li class="member"><b><tt>Collator::ON</tt></b></li>
       <li class="member"><b><tt>Collator::DEFAULT_VALUE</tt></b></li>
      </ul>
     </p>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::STRENGTH</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <p class="para">
      ICU Collation Service は、多くの比較レベルをサポートしています
      (&quot;レベル&quot; という名前ですが、&quot;強度&quot; と呼ばれることもあります)。
      これらのカテゴリを用いることで、ICU は、
      各地域の規約にあわせた適切な文字列の並べ替えを正確に行えるようになります。
      また、各段階を選択して採用することで、
      テキスト内の文字列検索をさまざまな条件で行うことも可能になります。
      詳細な情報は <span class="function"><a href="collator.setstrength.html" class="function">collator_set_strength()</a></span> を参照ください。
     </p>
     <p class="para">
      使用できる値は次のとおりです。
      <ul class="simplelist">
       <li class="member"><b><tt>Collator::PRIMARY</tt></b></li>
       <li class="member"><b><tt>Collator::SECONDARY</tt></b></li>
       <li class="member"><b><tt>Collator::TERTIARY</tt></b>(デフォルト)</li>
       <li class="member"><b><tt>Collator::QUATERNARY</tt></b></li>
       <li class="member"><b><tt>Collator::IDENTICAL</tt></b></li>
       <li class="member"><b><tt>Collator::DEFAULT_VALUE</tt></b></li>
      </ul>
     </p>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::HIRAGANA_QUATERNARY_MODE</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <p class="para">
      JIS x 4061 との互換性を維持するには、さらなるレベルを追加して
      ひらがなとカタカナを区別する必要があります。
      標準規格との互換性を要する場合は、この属性を
      <em class="emphasis">On</em> にして強度を Quaternary にしなければなりません。
      これは、ソートキーの長さにも文字列比較のパフォーマンスにも影響を及ぼします。
     </p>
     <p class="para">
      使用できる値は次のとおりです。
      <ul class="simplelist">
       <li class="member"><b><tt>Collator::OFF</tt></b>(デフォルト)</li>
       <li class="member"><b><tt>Collator::ON</tt></b></li>
       <li class="member"><b><tt>Collator::DEFAULT_VALUE</tt></b></li>
      </ul>
     </p>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::NUMERIC_COLLATION</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <p class="para">
      on にすると、数値形式の文字列の各桁を数値として使用した照合キーを生成します。
      これにより、&#039;100&#039; のほうが &#039;2&#039; より「後」に並ぶようになります。
     </p>
     <p class="para">
      使用できる値は次のとおりです。
      <ul class="simplelist">
       <li class="member"><b><tt>Collator::OFF</tt></b>(デフォルト)</li>
       <li class="member"><b><tt>Collator::ON</tt></b></li>
       <li class="member"><b><tt>Collator::DEFAULT_VALUE</tt></b></li>
      </ul>
     </p>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::DEFAULT_VALUE</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::PRIMARY</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::SECONDARY</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::TERTIARY</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::DEFAULT_STRENGTH</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::QUATERNARY</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::IDENTICAL</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::OFF</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::ON</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::SHIFTED</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::NON_IGNORABLE</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::LOWER_FIRST</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>


   <dt>

    <span class="term">
     <b><tt>Collator::UPPER_FIRST</tt></b>
     (<span class="type"><a href="language.types.integer.html" class="type integer">integer</a></span>)
    </span>
    <dd>

     <span class="simpara">

     </span>
    </dd>

   </dt>

  </dl>

 </p>
</div>

 </div>

 



































































































<h2>目次</h2><ul class="chunklist chunklist_reference"><li><a href="collator.asort.html">Collator::asort</a> — インデックスの情報を保持しつつ配列を並べ替える</li><li><a href="collator.compare.html">Collator::compare</a> — ふたつの Unicode 文字列を比較する</li><li><a href="collator.construct.html">Collator::__construct</a> — collator を作成する</li><li><a href="collator.create.html">Collator::create</a> — collator を作成する</li><li><a href="collator.getattribute.html">Collator::getAttribute</a> — 照合用の属性の値を取得する</li><li><a href="collator.geterrorcode.html">Collator::getErrorCode</a> — collator の直近のエラーコードを取得する</li><li><a href="collator.geterrormessage.html">Collator::getErrorMessage</a> — collator の直近のエラーコードのテキストを取得する</li><li><a href="collator.getlocale.html">Collator::getLocale</a> — collator のロケール名を取得する</li><li><a href="collator.getsortkey.html">Collator::getSortKey</a> — 文字列のソート用のキーを取得する</li><li><a href="collator.getstrength.html">Collator::getStrength</a> — 現在の照合強度を取得する</li><li><a href="collator.setattribute.html">Collator::setAttribute</a> — 照合用の属性を設定する</li><li><a href="collator.setstrength.html">Collator::setStrength</a> — 照合強度を設定する</li><li><a href="collator.sortwithsortkeys.html">Collator::sortWithSortKeys</a> — 指定した collator とキーで配列を並べ替える</li><li><a href="collator.sort.html">Collator::sort</a> — 指定した collator で配列を並べ替える</li></ul>
</div>
<hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="intl.examples.basic.html">基本的な使用法</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="collator.asort.html">Collator::asort</a></div>
 <div class="up"><a href="book.intl.html">intl</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
