<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>mnoGoSearch エージェントのセッションパラメータを設定する</title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.udm-open-stored.html">udm_open_stored</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="book.sphinx.html">Sphinx</a></div>
 <div class="up"><a href="ref.mnogosearch.html">mnoGoSearch 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.udm-set-agent-param" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">udm_set_agent_param</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.5, PHP 5 &lt;= 5.0.5, PECL mnogosearch &gt;= 1.0.0)</p><p class="refpurpose"><span class="refname">udm_set_agent_param</span> &mdash; <span class="dc-title">mnoGoSearch エージェントのセッションパラメータを設定する</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.udm-set-agent-param-description">
  <h3 class="title">説明</h3>
  <div class="methodsynopsis dc-description">
   <span class="type">bool</span> <span class="methodname"><b>udm_set_agent_param</b></span>
    ( <span class="methodparam"><span class="type">resource</span> <tt class="parameter">$agent</tt></span>
   , <span class="methodparam"><span class="type">int</span> <tt class="parameter">$var</tt></span>
   , <span class="methodparam"><span class="type">string</span> <tt class="parameter">$val</tt></span>
   )</div>

  <p class="para rdfs-comment">
   mnoGoSearch セッションパラメータを定義します。
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.udm-set-agent-param-parameters">
  <h3 class="title">パラメータ</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">agent</tt></i></span>
     <dd>

      <p class="para">
       <span class="function"><a href="function.udm-alloc-agent.html" class="function">udm_alloc_agent()</a></span> のコールにより取得した、
       エージェントのリンク ID。
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">var</tt></i></span>
     <dd>

      <p class="para">
       以下のパラメータおよびそれらの値が利用可能です。
       <ul class="itemizedlist">
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_PAGE_NUM</tt></b> - 検索結果のページ番号を選択するために
          使用されます (結果は、ページ毎に <b><tt>UDM_PARAM_PAGE_SIZE</tt></b> 個の結果を有する
          0 から始まるページで返されます)。
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_PAGE_SIZE</tt></b> - 1 ページに表示される検索結果の数です。
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_SEARCH_MODE</tt></b> - 検索モード。次の値が利用可能です。
          <b><tt>UDM_MODE_ALL</tt></b> - 全ての単語を検索します。; 
          <b><tt>UDM_MODE_ANY</tt></b> - いずれかの単語で検索します。; 
          <b><tt>UDM_MODE_PHRASE</tt></b> - 熟語で検索します。;
          <b><tt>UDM_MODE_BOOL</tt></b> - 論理値で検索します。論理値検索に関する詳細については
          <span class="function"><a href="function.udm-find.html" class="function">udm_find()</a></span> を参照ください。
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_CACHE_MODE</tt></b> - 検索結果のキャッシュモードをオンまたは
          オフにします。有効の場合、検索エンジンは検索結果をディスクに
          保存します。似たような検索が後で実行された場合、エンジンは
          より高速にキャッシュから結果を得ることが可能です。
          利用可能な値: <b><tt>UDM_CACHE_ENABLED</tt></b>, <b><tt>UDM_CACHE_DISABLED</tt></b>.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_TRACK_MODE</tt></b> - クエリ追跡モードをオンまたはオフにします。
          バージョン 3.1.2 以降、mnoGoSearch はクエリ追跡モードをサポート
          しています。追跡は SQL バージョンにのみ実装されており、組み込み
          データベースでは利用できません。追跡を使用するには、テーブルを
          追跡サポート用に作成する必要があります。MySQL の場合、
          <var class="filename">create/mysql/track.txt</var> を使用してください。検索実行時に、
          フロントエンドはクエリ単語、見つけたドキュメントの数、カレントの
          秒単位の Unix タイムスタンプを保存するためにこれらのテーブルを
          使用します。
          利用可能な値: <b><tt>UDM_TRACK_ENABLED</tt></b>, <b><tt>UDM_TRACK_DISABLED</tt></b>.
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_PHRASE_MODE</tt></b> - 熟語を用いたインデックスデータベースか
          どうかを定義します (indexer.confにおける&quot;phrase&quot; パラメータ)。
          使用可能な値: <b><tt>UDM_PHRASE_ENABLED</tt></b> および <b><tt>UDM_PHRASE_DISABLED</tt></b>。
          熟語検索が有効な場合 (<b><tt>UDM_PHRASE_ENABLED</tt></b>) でも、全てのモード
          (<i>ANY</i>、<i>ALL</i>、<i>BOOL</i>、<i>PHRASE</i>)
          で検索が可能であることに注意してください。
          mnoGoSearch のバージョン 3.1.10 で、SQL と組み込みデータベース
          モードでのみ熟語検索がサポートされました。一方、3.1.11 で
          キャッシュモードでも熟語検索がサポートされ始めました。
         </span>
         <span class="simpara">
          熟語検索の例:
         </span>
         <span class="simpara">
          <i>&quot;Arizona desert&quot;</i> - このクエリは、&quot;Arizona desert&quot; を熟語として含む
          全てのドキュメントを返します。熟語の前後に二重引用符が
          必要であることに注意してください。
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_CHARSET</tt></b> - ローカルな charset を定義します。利用可能な値:
          mnoGoSearch によりサポートされるcharset、
          例えば、koi8-r, cp1251, ...
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_STOPFILE</tt></b> - stopword ファイルの名前とパスを定義します。
          (mnoGoSearch と若干違いがあります。つまり、mnoGoSearch においては、
          相対パスまたはパスが入力されなかった場合、<b><tt>UDM_CONF_DIR</tt></b> からの
          相対パスとしてこのファイルが探されます。一方このモジュールは、
          カレントのパス、すなわち PHP スクリプトが実行されるパスからの
          相対パスで探します)。
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_STOPTABLE</tt></b> - 指定した SQL テーブルから停止単語をロード
          します。複数の StopwordTable コマンドを使用可能です。このコマンドは、
          SQL データベースサポートを有効にせずにコンパイルした場合は
          使用できません。
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_WEIGHT_FACTOR</tt></b> - 指定したドキュメント部分の重み係数を
          表します。現在、body, title, keywords, description, url が
          サポートされています。この機能を有効にするには、<var class="filename">indexer.conf</var> の
          *Weight コマンドに 2 の累乗を指定してください。ここで次のような
          重みを指定した場合を考えてみましょう。
         </span>
         <pre class="literallayout">
      URLWeight     1
      BodyWeight    2
      TitleWeight   4
      KeywordWeight 8
      DescWeight    16
         </pre>
     
         <span class="simpara">
          同じドキュメントにいくつかの単語が複数回現れる場合、
          indexerが単語の重みに OR 演算子を使用するので、異なった
          ドキュメントの部分に単語が現れる回数を検出可能です。本文にのみ現れる
          単語は、(2進標記で) 重み集合 00000010 を有します。すべての
          ドキュメント部分で使用される単語は、重み集合 00011111 を有します。
         </span>
     
         <span class="simpara">
          このパラメータの値は、16進数文字列 <i>ABCDE</i> です。各桁は、単語重みの
          対応するビットの因子です。上で指定した重み設定は次のようになります。
         </span>
         <pre class="literallayout">
       E is a factor for weight 1  (URL Weight bit)
       D is a factor for weight 2  (BodyWeight bit)
       C is a factor for weight 4  (TitleWeight bit)
       B is a factor for weight 8  (KeywordWeight bit)
       A is a factor for weight 16 (DescWeight bit)
         </pre>
         <span class="simpara">
          例:
         </span>
         <span class="simpara">
          <b><tt>UDM_PARAM_WEIGHT_FACTOR</tt></b>=00001 は、URL のみを検索します。
         </span>
         <span class="simpara">
          <b><tt>UDM_PARAM_WEIGHT_FACTOR</tt></b>=00100 は、Title のみを検索します。
         </span>
         <span class="simpara">
          <b><tt>UDM_PARAM_WEIGHT_FACTOR</tt></b>=11100 は、Title, Keywords, Desctription を
          検索しますが、URL と Body は検索しません。
         </span>
         <span class="simpara">
          <b><tt>UDM_PARAM_WEIGHT_FACTOR</tt></b>=F9421 は、次の検索を行います。
         </span>
         <pre class="literallayout">
        Description with factor 15  (F hex)
        Keywords with factor 9
        Title with factor  4
        Body with factor 2
        URL with factor 1
         </pre>
         <span class="simpara">
          <b><tt>UDM_PARAM_WEIGHT_FACTOR</tt></b> 変数が省略された場合、元の重みの値は
          ソート結果から引き出されます。上記で指定した重み設定の場合、
          ドキュメントの Description は、最大重み 16 を有するドキュメントの
          description を意味します。
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_WORD_MATCH</tt></b> - 単語にマッチ。このパラメータを単語検索型を
          選択する際に使用可能です。この機能は、&quot;single&quot; および &quot;multi&quot;
          モードで SQL データベースおよび組み込みのデータベースを使用する
          場合にのみ動作します。この機能は、cachemode および他のモードでは
          動作しません。これは、これらのモードが単語 CRC を使用しており、
          部分文字列検索をサポートしていないからです。
          利用可能な値は次のようになります。
         </span>
         <span class="simpara"><b><tt>UDM_MATCH_BEGIN</tt></b> - 単語の始めにマッチ</span>
         <span class="simpara"><b><tt>UDM_MATCH_END</tt></b> - 単語の終りにマッチ</span>
         <span class="simpara"><b><tt>UDM_MATCH_WORD</tt></b> - 単語全体にマッチ</span>
         <span class="simpara"><b><tt>UDM_MATCH_SUBSTR</tt></b> - 単語の部分文字列にマッチ</span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_MIN_WORD_LEN</tt></b> - 単語の最短長を定義します。
          この制限より短い単語は、stopword とみなされます。このパラメータは
          その値自身も範囲に含むことに注意してください。つまり、
          <b><tt>UDM_PARAM_MIN_WORD_LEN</tt></b>=3 の場合、3 文字の長さの単語は stopword と
          見なされませんが、2 文字の単語はstopwordとみなされます。
          デフォルトは 1 です。
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_ISPELL_PREFIXES</tt></b> - 利用可能な値は <b><tt>UDM_PREFIXES_ENABLED</tt></b> および
          <b><tt>UDM_PREFIXES_DISABLED</tt></b> で、それぞれプレフィックスの使用を有効あるいは
          無効とします。例えば検索クエリに &quot;tested&quot; が含まれていた場合、
          &quot;test&quot; や &quot;testing&quot; などといった単語も対象とします。デフォルトでは
          このようなサフィックスのみがサポートされています。プレフィックスは
          しばしば単語の意味を変えてしまいます。たとえば、&quot;tested&quot;
          を検索した際の結果として &quot;untested&quot; が出てきてほしいと思う人は
          ほとんどいないでしょう。プレフィックスのサポートは、サイトの
          スペルチェックのために使用すると便利です。ispell を有効にするには、
          <span class="function"><a href="function.udm-load-ispell-data.html" class="function">udm_load_ispell_data()</a></span> で ispell データを
          読み込む必要があります。
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_CROSS_WORDS</tt></b> - クロスワードのサポートを有効あるいは無効にします。
          利用可能な値: <b><tt>UDM_CROSS_WORDS_ENABLED</tt></b> および <b><tt>UDM_CROSS_WORDS_DISABLED</tt></b>
         </span>
         <span class="simpara">
          クロスワード機能により、&lt;a href=&quot;xxx&quot;&gt; と &lt;/a&gt; の間の
          単語もリンク先ドキュメントに設定します。これは SQL データベース
          モードで動作し、組み込みのデータベースやキャッシュモードでは
          使用できません。
         </span>
        </li>
        <li class="listitem">
         <span class="simpara">
          <b><tt>UDM_PARAM_VARDIR</tt></b> - 組み込みのデータベースやキャッシュモードを
          使用する際に、インデクサがデータを保存するディレクトリへの
          パスを指定します。デフォルトでは、<span class="application">mnoGoSearch</span> をインストールした
          ディレクトリの下の <i>/var</i> ディレクトリが
          使用されます。文字列値のみを指定可能です。
         </span>
        </li>
       </ul>
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">val</tt></i></span>
     <dd>

      <p class="para">
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 changelog" id="refsect1-function.udm-set-agent-param-changelog">
  <h3 class="title">変更履歴</h3>
  <p class="para">
   <table class="doctable informaltable">
    
     <thead valign="middle">
      <tr valign="middle">
       <th>バージョン</th>
       <th>説明</th>
      </tr>

     </thead>

     <tbody valign="middle" class="tbody">
      <tr valign="middle">
       <td align="left">4.1.0</td>
       <td align="left">
        <b><tt>UDM_PARAM_VARDIR</tt></b> が追加されました。
       </td>
      </tr>

     </tbody>
    
   </table>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.udm-set-agent-param-returnvalues">
  <h3 class="title">返り値</h3>
  <p class="para">
   成功した場合に <b><tt>TRUE</tt></b> を、失敗した場合に <b><tt>FALSE</tt></b> を返します。
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.udm-set-agent-param-notes">
  <h3 class="title">注意</h3>
  <blockquote class="note"><p><b class="note">注意</b>: 
   <span class="simpara">
    クロスワードは <span class="application">mnoGoSearch</span> 3.1.11 以降でのみサポートされています。
   </span>
  </p></blockquote>
 </div>


</div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="function.udm-open-stored.html">udm_open_stored</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="book.sphinx.html">Sphinx</a></div>
 <div class="up"><a href="ref.mnogosearch.html">mnoGoSearch 関数</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
