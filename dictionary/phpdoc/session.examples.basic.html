<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title></title>

 </head>
 <body><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="session.examples.html">例</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="session.idpassing.html">セッションIDの受渡し</a></div>
 <div class="up"><a href="session.examples.html">例</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="session.examples.basic" class="section">
  <blockquote class="note"><p><b class="note">注意</b>: 
   <p class="para">
    PHP 4.1.0以降、<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>は、
    <var class="varname"><var class="varname"><a href="reserved.variables.post.html" class="classname">$_POST</a></var></var>, <var class="varname"><var class="varname"><a href="reserved.variables.get.html" class="classname">$_GET</a></var></var>,
    <var class="varname"><var class="varname"><a href="reserved.variables.request.html" class="classname">$_REQUEST</a></var></var>等のようにグローバル変数として利用可
    能です。<var class="varname"><var class="varname">$HTTP_SESSION_VARS</var></var>と異なり、
    <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>は常にグローバルです。そこで、
    <a href="language.variables.scope.html" class="link"><strong class="command">global</strong></a>
    は<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>の場合は不要です。
    このドキュメントでは、<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var> をあらゆる場
    所で使用していることに注意してください。もし前者を使用したい場合に
    は、<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>を
    <var class="varname"><var class="varname">$HTTP_SESSION_VARS</var></var>で置き換えることができます。
    また、<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>を使用する前に
    <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span> を用いてセッションを開始して
    おく必要があることに注意してください。
   </p>
   <p class="para">
    連想配列<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>のキーは、PHPの通常の変数名
    と同じ制限があります。すなわち、数字で始まることはできず、文字ま
    たはアンダースコアで始まる必要があります。
    詳細については、本マニュアルの
    <a href="language.variables.html" class="link">変数</a>の節を参照して下さ
    い。
   </p>
  </p></blockquote>

  <p class="para">
   <a href="ini.core.html#ini.register-globals" class="link"><i>register_globals</i></a>
   が無効の場合、グローバル連想配列<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>のメ
   ンバーのみがセッション変数として登録されます。
   回復されたセッション変数は、配列<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>での
   み利用可能です。
  </p>
  <p class="para">
   セキュリティとコードの可読性のために<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>
   (またはPHP 4.0.6以前は<var class="varname"><var class="varname">$HTTP_SESSION_VARS</var></var>)の使用
   が推奨されます。<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>の場合、
   <span class="function"><a href="function.session-register.html" class="function">session_register()</a></span>,
   <span class="function"><a href="function.session-unregister.html" class="function">session_unregister()</a></span>,
   <span class="function"><a href="function.session-is-registered.html" class="function">session_is_registered()</a></span>は不要です。ユーザは、
   通常の変数と同様にセッション変数にアクセス可能
   です。
   <div class="example" id="example-3897">
    <p><b>例1 
     <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>で変数を登録
    </b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />session_start</span><span style="color: #007700">();<br /></span><span style="color: #FF8000">//&nbsp;PHP&nbsp;4.0.6以前の場合は$HTTP_SESSION_VARSを使用してください<br /></span><span style="color: #007700">if&nbsp;(!isset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]))&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">;<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]++;<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example" id="example-3898">
    <p><b>例2 
     <a href="ini.core.html#ini.register-globals" class="link"><i>register_globals</i></a>
     が無効な場合に、<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>に登録されている変
     数の登録を解除する
    </b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />session_start</span><span style="color: #007700">();<br /></span><span style="color: #FF8000">//&nbsp;PHP&nbsp;4.0.6とそれ以前では$HTTP_SESSION_VARSを使用してください<br /></span><span style="color: #007700">unset(</span><span style="color: #0000BB">$_SESSION</span><span style="color: #007700">[</span><span style="color: #DD0000">'count'</span><span style="color: #007700">]);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="caution"><b class="caution">警告</b>
    <p class="para">
     <i>unset($_SESSION)</i>によって
     全ての<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>を初期化してはいけません。
     <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>スーパーグローバル変数を用いた
     セッション変数の登録ができなくなってしまうからです。
    </p>
   </div>
  </p>
  <div class="warning"><b class="warning">警告</b>
   <p class="para">
    セッション変数において参照を使用することはできません。
    他の変数への参照の再現する方法がないからです。
   </p>
  </div>
  <p class="para">
   <a href="ini.core.html#ini.register-globals" class="link">register_globals</a>
   が有効な場合、全てのグローバル変数はセッション変数として登録するこ
   とが可能で、セッション変数は対応するグローバル変数として回復されま
   す。PHPは、どのグローバル変数がセッション変数として登録されるのか
   を知る必要があるため、ユーザは、変数を
   <span class="function"><a href="function.session-register.html" class="function">session_register()</a></span>関数で登録する必要がありま
   す。しかし、<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>の場合は、エントリを設定
   するだけでこれを行う必要はありません。
   <div class="caution"><b class="caution">警告</b>
    <p class="para">
     PHP 4.3.0 より前のバージョンでは、
     <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>を使用し、<a href="ini.core.html#ini.register-globals" class="link">register_globals</a>
     を無効とする場合、
     <span class="function"><a href="function.session-register.html" class="function">session_register()</a></span>,
     <span class="function"><a href="function.session-is-registered.html" class="function">session_is_registered()</a></span>,
　   <span class="function"><a href="function.session-unregister.html" class="function">session_unregister()</a></span>を使用しないでください。
     セキュリティ面と性能面の双方より<a href="ini.core.html#ini.register-globals" class="link">register_globals</a>
     を無効とすることが推奨されています。
    </p>
   </div>
  </p>
  <p class="para">
   <a href="ini.core.html#ini.register-globals" class="link">register_globals</a>
   が有効な場合、グローバル変数と<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>の
   エントリは、前のセッションインスタンスで登録されたセッション変数
   の同じ値を参照することになります。
   しかし、変数が <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var> で登録された場合、
   グローバル変数が使用可能となるのは次のリクエスト以降です。
  </p>
  <p class="para">
   PHP 4.2.3とそれ以前のバージョンのみに関係する問題があります。
   <span class="function"><a href="function.session-register.html" class="function">session_register()</a></span>により新しいセッショ
   ン変数を登録する場合、グローバルスコープのエントリと
   <var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>のエントリは、次の
   <span class="function"><a href="function.session-start.html" class="function">session_start()</a></span>まで同じ値へのリファレンスとは
   なりません。
   すなわち、グローバル変数への修正は、<var class="varname"><var class="varname"><a href="reserved.variables.session.html" class="classname">$_SESSION</a></var></var>
   のエントリには反映されません。PHP 4.3.0 では修正されています。
  </p>
 </div><hr /><div class="manualnavbar" style="text-align: center;">
 <div class="prev" style="text-align: left; float: left;"><a href="session.examples.html">例</a></div>
 <div class="next" style="text-align: right; float: right;"><a href="session.idpassing.html">セッションIDの受渡し</a></div>
 <div class="up"><a href="session.examples.html">例</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
